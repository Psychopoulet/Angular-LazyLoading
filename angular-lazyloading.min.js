angular.module("ngLazyLoading",[]).service("$lazyloading",["$document","$q","$timeout","$log",function(e,t,a,r){var o=!1;this.loadScript=function(o){var c=null,n=!1,i=t.defer();try{c=e[0].createElement("script"),c.src=o,c.type="text/javascript",c.async=!0,c.onload=c.onreadystatechange=function(e){var t=this;a(function(){n||t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState?(r.error(e),i.reject("Unable to load "+o)):(n=!0,c.onload=c.onreadystatechange=null,i.resolve())})},c.onerror=function(e){r.error(e),i.reject("Unable to load "+o)},e[0].body.appendChild(c)}catch(l){r.error(l),i.reject(l)}return i.promise},this.loadFBScript=function(e,a,r){var c=t.defer();try{a=angular.isDefined(a)&&""!==a?a:"en_US",r=angular.isDefined(r)&&""!==r?r:"v2.2",angular.isDefined(e)&&""!==e?o?c.resolve(FB):this.loadScript("//connect.facebook.net/"+a+"/sdk.js").then(function(){try{FB&&"function"==typeof FB.init&&"function"==typeof FB.getLoginStatus?(o||(FB.init({appId:e,cookie:!0,oauth:!0,status:!0,version:r,xfbml:!0}),o=!0),c.resolve(FB)):c.reject("Unable to load Facebook tools.")}catch(t){c.reject(t)}})["catch"](function(e){c.reject(e)}):c.reject("Missing p_sFBID.")}catch(n){c.reject(n)}return c.promise},this.loadGAScript=function(e){var a=t.defer();try{angular.isDefined(e)&&""!==e?this.loadScript("//www.google-analytics.com/analytics.js").then(function(){try{"function"!=typeof ga?a.reject("Unable to load Google Analytics."):(ga("create",e,"auto"),ga("require","displayfeatures"),a.resolve())}catch(t){a.reject(t)}})["catch"](function(e){a.reject(e)}):a.reject("Missing p_sGAID.")}catch(r){a.reject(r)}return a.promise},this.loadCaptchaScript=function(){var e="//www.google.com/recaptcha/api.js?onload=onLoadCaptchaScriptCallback&render=explicit",a=t.defer();try{window.onLoadCaptchaScriptCallback=function(){a.resolve(grecaptcha)},this.loadScript(e)["catch"](function(e){a.reject(e)})}catch(r){a.reject(r)}return a.promise}}]);
